# Health-InfraOps Dnsmasq Configuration
# Lightweight DNS and DHCP for internal networks

# Basic configuration
domain-needed
bogus-priv
no-resolv
no-poll

# Logging
log-queries
log-dhcp
log-facility=/var/log/dnsmasq.log

# DNS settings
server=8.8.8.8
server=8.8.4.4
server=1.1.1.1
local=/infokes.co.id/

# Cache settings
cache-size=1000
local-ttl=300

# DHCP configuration (for VLANs)
interface=eth0
dhcp-range=10.0.10.100,10.0.10.200,255.255.255.0,12h
dhcp-range=10.0.20.100,10.0.20.150,255.255.255.0,24h
dhcp-range=10.0.30.100,10.0.30.150,255.255.255.0,6h
dhcp-range=10.0.40.100,10.0.40.150,255.255.255.0,24h
dhcp-range=10.0.50.100,10.0.50.150,255.255.255.0,24h

# DHCP options
dhcp-option=3,10.0.10.1    # Default gateway for VLAN 10
dhcp-option=3,10.0.20.1    # Default gateway for VLAN 20
dhcp-option=3,10.0.30.1    # Default gateway for VLAN 30
dhcp-option=3,10.0.40.1    # Default gateway for VLAN 40
dhcp-option=3,10.0.50.1    # Default gateway for VLAN 50
dhcp-option=6,10.0.40.42   # DNS server

# Static IP assignments
# Load Balancers
dhcp-host=aa:bb:cc:dd:ee:01,vm-lb-01,10.0.30.10
dhcp-host=aa:bb:cc:dd:ee:02,vm-lb-02,10.0.30.11

# Application Servers
dhcp-host=aa:bb:cc:dd:ee:11,vm-app-01,10.0.10.11
dhcp-host=aa:bb:cc:dd:ee:12,vm-app-02,10.0.10.12
dhcp-host=aa:bb:cc:dd:ee:13,vm-app-03,10.0.10.13
dhcp-host=aa:bb:cc:dd:ee:14,vm-app-04,10.0.10.14

# API Servers
dhcp-host=aa:bb:cc:dd:ee:15,vm-api-01,10.0.10.15
dhcp-host=aa:bb:cc:dd:ee:16,vm-api-02,10.0.10.16
dhcp-host=aa:bb:cc:dd:ee:17,vm-api-03,10.0.10.17

# Database Servers
dhcp-host=aa:bb:cc:dd:ee:21,vm-db-mysql-01,10.0.20.21
dhcp-host=aa:bb:cc:dd:ee:22,vm-db-mysql-02,10.0.20.22
dhcp-host=aa:bb:cc:dd:ee:23,vm-db-pg-01,10.0.20.23
dhcp-host=aa:bb:cc:dd:ee:24,vm-db-pg-02,10.0.20.24
dhcp-host=aa:bb:cc:dd:ee:25,vm-db-mongo-01,10.0.20.25
dhcp-host=aa:bb:cc:dd:ee:26,vm-db-mongo-02,10.0.20.26

# Monitoring Servers
dhcp-host=aa:bb:cc:dd:ee:41,vm-mon-01,10.0.40.41
dhcp-host=aa:bb:cc:dd:ee:42,vm-dns-01,10.0.40.42
dhcp-host=aa:bb:cc:dd:ee:43,vm-dns-02,10.0.40.43

# Static Content Servers
dhcp-host=aa:bb:cc:dd:ee:51,vm-static-01,10.0.10.19
dhcp-host=aa:bb:cc:dd:ee:52,vm-static-02,10.0.10.20

# Backup Servers
dhcp-host=aa:bb:cc:dd:ee:61,vm-backup-01,10.0.50.10
dhcp-host=aa:bb:cc:dd:ee:62,vm-nfs-01,10.0.50.11

# DNS records for Health-InfraOps infrastructure
# Load Balancers
address=/lb-01.infokes.co.id/10.0.30.10
address=/lb-02.infokes.co.id/10.0.30.11
address=/infokes.co.id/10.0.30.10
address=/www.infokes.co.id/10.0.30.10
address=/app.infokes.co.id/10.0.30.10
address=/api.infokes.co.id/10.0.30.10

# Application Servers
address=/app-01.infokes.co.id/10.0.10.11
address=/app-02.infokes.co.id/10.0.10.12
address=/app-03.infokes.co.id/10.0.10.13
address=/app-04.infokes.co.id/10.0.10.14

# API Servers
address=/api-01.infokes.co.id/10.0.10.15
address=/api-02.infokes.co.id/10.0.10.16
address=/api-03.infokes.co.id/10.0.10.17

# Database Servers
address=/db-mysql-01.infokes.co.id/10.0.20.21
address=/db-mysql-02.infokes.co.id/10.0.20.22
address=/db-pg-01.infokes.co.id/10.0.20.23
address=/db-pg-02.infokes.co.id/10.0.20.24
address=/db-mongo-01.infokes.co.id/10.0.20.25
address=/db-mongo-02.infokes.co.id/10.0.20.26

# Monitoring
address=/monitor.infokes.co.id/10.0.40.41
address=/grafana.infokes.co.id/10.0.40.41
address=/prometheus.infokes.co.id/10.0.40.41
address=/zabbix.infokes.co.id/10.0.40.41

# DNS Servers
address=/ns1.infokes.co.id/10.0.40.42
address=/ns2.infokes.co.id/10.0.40.43

# Static Content
address=/static-01.infokes.co.id/10.0.10.19
address=/static-02.infokes.co.id/10.0.10.20

# Backup Infrastructure
address=/backup-01.infokes.co.id/10.0.50.10
address=/nfs-01.infokes.co.id/10.0.50.11
address=/ceph-01.infokes.co.id/10.0.50.12
address=/ceph-02.infokes.co.id/10.0.50.13
address=/ceph-03.infokes.co.id/10.0.50.14

# PTR records for reverse DNS
ptr-record=10.30.0.10.in-addr.arpa,lb-01.infokes.co.id.
ptr-record=10.30.0.11.in-addr.arpa,lb-02.infokes.co.id.
ptr-record=11.10.0.10.in-addr.arpa,app-01.infokes.co.id.
ptr-record=12.10.0.10.in-addr.arpa,app-02.infokes.co.id.
ptr-record=21.20.0.10.in-addr.arpa,db-mysql-01.infokes.co.id.
ptr-record=41.40.0.10.in-addr.arpa,mon-01.infokes.co.id.

# Additional domains for development/staging
address=/staging.infokes.co.id/10.0.60.10
address=/dev.infokes.co.id/10.0.70.10

# Wildcard for subdomains
address=/.infokes.co.id/10.0.30.10