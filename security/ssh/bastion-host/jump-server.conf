# Health-InfraOps Jump Server Configuration
# Bastion host configuration for SSH jump host functionality

# SSH Client Configuration for Jump Host
Host bastion.infokes.co.id
    HostName 10.0.40.44
    Port 2222
    User admin
    IdentityFile ~/.ssh/health-infraops-admin.key
    ServerAliveInterval 60
    ServerAliveCountMax 3
    Compression yes
    ControlMaster auto
    ControlPath ~/.ssh/control-%r@%h:%p
    ControlPersist 10m

# Production Servers via Bastion
Host *.prod.infokes.co.id
    ProxyJump bastion.infokes.co.id
    User admin
    IdentityFile ~/.ssh/health-infraops-admin.key
    ServerAliveInterval 60
    ServerAliveCountMax 3

Host app-*.infokes.co.id
    ProxyJump bastion.infokes.co.id
    User admin
    IdentityFile ~/.ssh/health-infraops-admin.key

Host db-*.infokes.co.id
    ProxyJump bastion.infokes.co.id
    User admin
    IdentityFile ~/.ssh/health-infraops-admin.key

Host lb-*.infokes.co.id
    ProxyJump bastion.infokes.co.id
    User admin
    IdentityFile ~/.ssh/health-infraops-admin.key

Host mon-*.infokes.co.id
    ProxyJump bastion.infokes.co.id
    User admin
    IdentityFile ~/.ssh/health-infraops-admin.key

Host backup-*.infokes.co.id
    ProxyJump bastion.infokes.co.id
    User admin
    IdentityFile ~/.ssh/health-infraops-admin.key

# Service-specific configurations
Host ansible-runner
    HostName 10.0.40.45
    ProxyJump bastion.infokes.co.id
    User ansible
    IdentityFile ~/.ssh/health-infraops-ansible.key

Host deploy-server
    HostName 10.0.40.46
    ProxyJump bastion.infokes.co.id
    User deploy
    IdentityFile ~/.ssh/health-infraops-deploy.key

Host monitor-collector
    HostName 10.0.40.47
    ProxyJump bastion.infokes.co.id
    User monitor
    IdentityFile ~/.ssh/health-infraops-monitor.key

# Database direct access (restricted)
Host mysql-master
    HostName 10.0.20.21
    ProxyJump bastion.infokes.co.id
    User dba
    IdentityFile ~/.ssh/health-infraops-dba.key

Host postgres-master
    HostName 10.0.20.23
    ProxyJump bastion.infokes.co.id
    User dba
    IdentityFile ~/.ssh/health-infraops-dba.key

# Backup system access
Host backup-system
    HostName 10.0.50.10
    ProxyJump bastion.infokes.co.id
    User backup
    IdentityFile ~/.ssh/health-infraops-backup.key

# Load Balancer management
Host loadbalancer-*
    ProxyJump bastion.infokes.co.id
    User lb-admin
    IdentityFile ~/.ssh/health-infraops-lb-admin.key

# Global settings for all Health-InfraOps hosts
Host *.infokes.co.id
    User admin
    IdentityFile ~/.ssh/health-infraops-admin.key
    ServerAliveInterval 60
    ServerAliveCountMax 3
    TCPKeepAlive yes
    Compression yes
    LogLevel INFO
    StrictHostKeyChecking yes
    UserKnownHostsFile ~/.ssh/known_hosts_health_infraops

# Alias definitions for common servers
Host app
    HostName app-01.infokes.co.id

Host api
    HostName api-01.infokes.co.id

Host db
    HostName db-mysql-01.infokes.co.id

Host mon
    HostName mon-01.infokes.co.id

Host lb
    HostName lb-01.infokes.co.id

# Multi-hop configurations for complex environments
Host app-via-mon
    HostName app-01.infokes.co.id
    ProxyJump mon-01.infokes.co.id,bastion.infokes.co.id

Host db-via-app
    HostName db-mysql-01.infokes.co.id
    ProxyJump app-01.infokes.co.id,bastion.infokes.co.id

# Emergency access (direct connection, no bastion)
Host *.emergency.infokes.co.id
    User root
    IdentityFile ~/.ssh/health-infraops-emergency.key
    Port 22